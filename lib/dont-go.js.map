{"version":3,"file":"dont-go.js","sources":["../src/index.js"],"sourcesContent":["function dontGo (options = {}) {\n  const defaults = {\n    title: \"Don't go!\",\n    faviconSrc: '',\n    timeout: 0,\n    interval: 1000\n  }\n\n  const opts = Object.assign(defaults, options)\n  const originalTitle = document.title\n\n  let favicon\n  let originalFavicon\n  let img\n  let timeout\n  let interval\n  let counter = 0\n\n  // Store the original favicon if it exists\n  if (document.querySelectorAll('link[rel$=\"icon\"]').length) {\n    favicon = document.querySelector('link[rel$=\"icon\"]')\n    originalFavicon = favicon.getAttribute('href')\n  }\n\n  // Preload the alternative favicon\n  if (opts.faviconSrc.length) {\n    img = new Image() // eslint-disable-line\n    img.src = opts.faviconSrc\n  }\n\n  const setHidden = () => {\n    // if title is string just switch the title\n    if (typeof opts.title === 'string') {\n      document.title = opts.title\n    } else {\n      document.title = opts.title[0]\n      interval = setInterval(nextTitle, opts.interval)\n    }\n\n    if (opts.faviconSrc.length) {\n      favicon.setAttribute('href', opts.faviconSrc)\n    }\n  }\n\n  const nextTitle = () => {\n    counter++\n    if (counter >= opts.title.length) {\n      counter = 0\n    }\n    document.title = opts.title[counter]\n  }\n\n  document.addEventListener('visibilitychange', () => {\n    if (document.visibilityState === 'hidden') {\n      if (opts.timeout > 0) {\n        timeout = setTimeout(setHidden, opts.timeout)\n      } else {\n        setHidden()\n      }\n    } else {\n      document.title = originalTitle\n      favicon.setAttribute('href', originalFavicon)\n      clearTimeout(timeout)\n      clearInterval(interval)\n    }\n  })\n}\n\nexport default dontGo\n"],"names":["options","const","favicon","originalFavicon","timeout","interval","opts","Object","assign","title","faviconSrc","originalTitle","document","counter","querySelectorAll","length","querySelector","getAttribute","Image","src","setHidden","setInterval","nextTitle","setAttribute","addEventListener","visibilityState","setTimeout","clearTimeout","clearInterval"],"mappings":"eAAA,SAAiBA,kBAAU,IACzBC,IAUIC,EACAC,EAEAC,EACAC,EAPEC,EAAOC,OAAOC,OAPH,CACfC,MAAO,YACPC,WAAY,GACZN,QAAS,EACTC,SAAU,KAGyBL,GAC/BW,EAAgBC,SAASH,MAO3BI,EAAU,EAGVD,SAASE,iBAAiB,qBAAqBC,SACjDb,EAAUU,SAASI,cAAc,qBACjCb,EAAkBD,EAAQe,aAAa,SAIrCX,EAAKI,WAAWK,UACZ,IAAIG,OACNC,IAAMb,EAAKI,YAGjBT,IAAMmB,aAEsB,iBAAfd,EAAKG,MACdG,SAASH,MAAQH,EAAKG,OAEtBG,SAASH,MAAQH,EAAKG,MAAM,GAC5BJ,EAAWgB,YAAYC,EAAWhB,EAAKD,WAGrCC,EAAKI,WAAWK,QAClBb,EAAQqB,aAAa,OAAQjB,EAAKI,aAIhCY,eACJT,GACeP,EAAKG,MAAMM,SACxBF,EAAU,GAEZD,SAASH,MAAQH,EAAKG,MAAMI,IAG9BD,SAASY,iBAAiB,8BACS,WAA7BZ,SAASa,gBACPnB,EAAKF,QAAU,EACjBA,EAAUsB,WAAWN,EAAWd,EAAKF,SAErCgB,KAGFR,SAASH,MAAQE,EACjBT,EAAQqB,aAAa,OAAQpB,GAC7BwB,aAAavB,GACbwB,cAAcvB"}